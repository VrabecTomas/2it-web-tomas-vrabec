<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game of Life</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: #444;
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: none; /* Hidden as per "all black" minimalism implication, but kept in code just in case */
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(7, 60px);
            grid-template-rows: repeat(7, 60px);
            gap: 2px;
            background-color: #111;
            padding: 5px;
            border: 1px solid #333;
        }

        .cell {
            width: 60px;
            height: 60px;
            background-color: #000;
            cursor: pointer;
            border: 1px solid #222;
        }

        .cell.alive {
            background-color: #00ff00;
        }

        .cell:hover {
            border-color: #555;
        }
    </style>
</head>
<body>

    <div class="grid-container" id="grid">
        <!-- Cells generated by JS -->
    </div>

    <script>
        const ROWS = 7;
        const COLS = 7;
        let grid = [];
        let intervalId = null;
        let isRunning = false;

        const gridElement = document.getElementById('grid');

        // Initialize Grid
        function initGrid() {
            gridElement.innerHTML = '';
            grid = [];
            for (let r = 0; r < ROWS; r++) {
                let row = [];
                for (let c = 0; c < COLS; c++) {
                    row.push(0); 
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.dataset.row = r;
                    cell.dataset.col = c;
                    // Stop propagation so clicking a cell doesn't trigger the body click (Pause/Play)
                    cell.addEventListener('mousedown', (e) => {
                        e.stopPropagation();
                        toggleCell(r, c);
                    });
                    gridElement.appendChild(cell);
                }
                grid.push(row);
            }
            
            // "3 in middle" - Blinker pattern
            // Row 3, Columns 2, 3, 4
            grid[3][2] = 1;
            grid[3][3] = 1;
            grid[3][4] = 1;

            updateView();
        }

        function toggleCell(r, c) {
            grid[r][c] = grid[r][c] ? 0 : 1;
            updateView();
        }

        function updateView() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                const r = parseInt(cell.dataset.row);
                const c = parseInt(cell.dataset.col);
                if (grid[r][c] === 1) {
                    cell.classList.add('alive');
                } else {
                    cell.classList.remove('alive');
                }
            });
            
            // Visual feedback for Paused state (optional, but good for UX)
            document.body.style.backgroundColor = isRunning ? '#000' : '#111';
        }

        function countNeighbors(r, c) {
            let count = 0;
            for (let i = -1; i <= 1; i++) {
                for (let j = -1; j <= 1; j++) {
                    if (i === 0 && j === 0) continue;
                    
                    const nr = r + i;
                    const nc = c + j;

                    if (nr >= 0 && nr < ROWS && nc >= 0 && nc < COLS) {
                        count += grid[nr][nc];
                    }
                }
            }
            return count;
        }

        function nextGen() {
            const newGrid = grid.map(arr => [...arr]); // Deep copy

            for (let r = 0; r < ROWS; r++) {
                for (let c = 0; c < COLS; c++) {
                    const neighbors = countNeighbors(r, c);
                    const cell = grid[r][c];

                    if (cell === 1 && neighbors < 2) {
                        newGrid[r][c] = 0; // Undernopulation
                    }
                    else if (cell === 1 && (neighbors === 2 || neighbors === 3)) {
                        newGrid[r][c] = 1; // Survival
                    }
                    else if (cell === 1 && neighbors > 3) {
                        newGrid[r][c] = 0; // Overpopulation
                    }
                    else if (cell === 0 && neighbors === 3) {
                        newGrid[r][c] = 1; // Reproduction
                    }
                }
            }
            grid = newGrid;
            updateView();
        }

        function togglePlay() {
            if (isRunning) {
                clearInterval(intervalId);
                intervalId = null;
                isRunning = false;
            } else {
                intervalId = setInterval(nextGen, 1000); // 1 second steps
                isRunning = true;
            }
            updateView();
        }

        // Initialize
        initGrid();

        // Interaction: Spacebar or Click Body to Toggle Play/Pause
        document.body.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                togglePlay();
            }
        });

        document.body.addEventListener('click', () => {
             togglePlay();
        });

    </script>
</body>
</html>